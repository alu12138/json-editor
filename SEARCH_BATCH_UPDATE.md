# 搜索和批量修改功能更新说明

## 功能更新

### 1. 搜索改为手动查找 ✅

**原来的行为：**
- 在搜索框输入时，树形菜单实时过滤显示

**新的行为：**
- 在搜索框输入内容
- 点击"查找"按钮才会过滤树形菜单
- 或者按下 Enter 键也会触发查找

**优势：**
- 减少不必要的实时过滤计算
- 用户能更精确控制搜索时机
- 输入时不会产生卡顿

### 2. 批量修改支持复选框 ✅

**新增功能：**
- 批量修改弹窗中每个匹配字段都有复选框
- 默认所有字段都被选中
- 可以取消选中某些字段，只修改部分字段
- 弹窗标题显示"已选 X 个"

**操作方式：**

```
1. 在搜索框输入要查找的内容
2. 点击"批量修改"按钮
3. 弹窗列出所有匹配的字段（默认全选）
4. 取消勾选不需要修改的字段
5. 输入新值
6. 点击"确定"，只会修改勾选的字段
```

**快捷操作：**
- **全选** 按钮：快速全部选中
- **全不选** 按钮：快速全部取消
- **直接点击字段文本**：快速切换该字段的选中状态
- **点击复选框**：选中/取消该字段

### 3. 批量修改的灵活性

**示例场景：**

假设有以下搜索结果：
```
- users.0.name
- users.1.name
- users.2.name
- config.name
```

**场景 1：修改所有 name 字段为 "John"**
- 保持全选状态
- 输入 "John"
- 点"确定"
- 结果：4 个字段都改为 "John"

**场景 2：只修改前两个 name**
- 取消勾选 `users.2.name` 和 `config.name`
- 输入 "John"
- 点"确定"
- 结果：只有前两个字段改为 "John"，其他不变

**场景 3：修改后统计**
- 弹窗标题会显示修改成功的条数
- 例如："批量修改成功，共修改 2 个字段"

## 搜索与批量修改的工作流

```
输入搜索内容
    ↓
点击"查找"按钮 或 按下 Enter
    ↓
树形菜单显示匹配结果
    ↓
点击"批量修改"按钮
    ↓
弹窗打开，显示所有匹配项（默认全选）
    ↓
可选：取消勾选不需要修改的项
    ↓
输入新值 (JSON 格式)
    ↓
点击"确定"
    ↓
只修改被选中的字段
```

## 界面变化

### 搜索框
```
原来：
[搜索框（实时搜索）] [批量修改]

现在：
[搜索框] [查找] [批量修改]
```

### 批量修改弹窗

**原来：**
```
┌─────────────────────────────────────┐
│ 批量修改 (共 3 个字段)              │
├─────────────────────────────────────┤
│ 将要修改的字段：                    │
│ ┌───────────────────────────────┐   │
│ │ users.0.name                  │   │
│ │ users.1.name                  │   │
│ │ users.2.name                  │   │
│ └───────────────────────────────┘   │
│ 新值: [输入框]                     │
└─────────────────────────────────────┘
```

**现在：**
```
┌────────────────────────────────────────────┐
│ 批量修改 (共 3 个字段，已选 3 个)          │
├────────────────────────────────────────────┤
│ 将要修改的字段：  [全选] [全不选]         │
│ ┌──────────────────────────────────────┐   │
│ │ ☑ users.0.name                      │   │
│ │ ☑ users.1.name                      │   │
│ │ ☑ users.2.name                      │   │
│ └──────────────────────────────────────┘   │
│ 新值: [输入框]                            │
└────────────────────────────────────────────┘
```

## 常见操作

| 操作 | 方式 |
|------|------|
| 查找内容 | 输入 → 点"查找" 或 按 Enter |
| 全部选中 | 点"全选"按钮 |
| 全部取消 | 点"全不选"按钮 |
| 切换单项 | 直接点字段文本 或 点复选框 |
| 只修改某些项 | 取消勾选不需要的项 → 输入新值 → 确定 |

## 性能优化

- ✅ 搜索不再实时进行，减少计算量
- ✅ 用户可以精确控制搜索时机
- ✅ 大树形菜单不会频繁重新渲染
- ✅ 输入搜索词时界面流畅无卡顿

## 版本说明

- 搜索方式：从实时搜索改为手动查找
- 批量修改：从全量修改改为选择性修改
- 默认行为：弹窗打开时默认全选所有字段


